<div class="relative flex items-center w-full" x-data="{ open: false }">

    <a :href="window.parker.route('pages.reader', { comic_id: comicId })"
       class="flex-1 bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-4 rounded-l-lg transition-colors flex items-center justify-center gap-2 shadow-lg shadow-blue-900/20 border-r border-black"
        :class="comic?.read_status === 'in_progress' ? 'bg-blue-600 hover:bg-blue-500' : 'bg-green-600 hover:bg-green-500'"
    >
        <span class="text-xl" x-text="comic?.read_status === 'in_progress' ? 'â–¶' : 'ðŸ“–'"></span>
        <span x-text="comic?.read_status === 'in_progress' ? 'Continue' : 'Read Now'"></span>
    </a>

    <button x-on:click="open = !open" x-on:click.away="open = false"
            class="text-white font-bold py-3 px-3 rounded-r-lg transition-colors flex items-center justify-center"
            :class="comic?.read_status === 'in_progress' ? 'bg-blue-600 hover:bg-blue-500' : 'bg-green-600 hover:bg-green-500'"
            title="More Options">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
        </svg>
    </button>

    <div x-show="open"
         x-transition:enter="transition ease-out duration-100"
         x-transition:enter-start="transform opacity-0 scale-95"
         x-transition:enter-end="transform opacity-100 scale-100"
         x-transition:leave="transition ease-in duration-75"
         x-transition:leave-start="transform opacity-100 scale-100"
         x-transition:leave-end="transform opacity-0 scale-95"
         class="absolute top-full left-0 right-0 mt-2 rounded-md shadow-lg bg-gray-800 ring-1 ring-black ring-opacity-5 z-50 border border-gray-700"
         style="display: none;">

        <div class="py-1">
            <a :href="window.parker.route('pages.reader', { comic_id: comicId }, 'incognito=true')"
               class="group flex items-center px-4 py-3 text-sm text-gray-300 hover:bg-gray-700 hover:text-white transition-colors">
                <span class="mr-3 text-lg opacity-70 group-hover:opacity-100">ðŸ‘“</span>
                <div>
                    <span class="font-bold block">Read in Incognito</span>
                    <span class="text-xs text-gray-500 group-hover:text-gray-400">Progress won't be saved</span>
                </div>
            </a>
        </div>
    </div>
</div>
