<div class="bg-gray-800 rounded-lg p-4 hover:bg-gray-750 transition-colors border border-gray-700 flex flex-col sm:flex-row gap-4 group">

    <a :href="window.url(`/reader/${item.comic_id}`)" class="flex-shrink-0 relative block w-24 h-36 rounded overflow-hidden shadow-sm group-hover:shadow-md transition-all mx-auto sm:mx-0">
        <img :src="window.url(item.thumbnail_path)" :alt="item.title" class="w-full h-full object-cover" loading="lazy">
    </a>

    <div class="flex-1 min-w-0 flex flex-col justify-center w-full">
        <a :href="window.url(`/series/${item.series_id}`)" class="text-sm text-gray-400 hover:text-blue-400 transition-colors truncate" x-text="item.series"></a>

        <h3 class="text-white font-bold text-lg truncate mb-1">
            <a :href="window.url(`/comics/${item.comic_id}`)" class="hover:text-blue-400 transition-colors" x-text="`#${item.number} ${item.title || ''}`"></a>
        </h3>

        <div class="text-xs text-gray-500 mb-3" x-text="new Date(item.last_read_at).toLocaleDateString()"></div>

        <div class="w-full bg-gray-700 rounded-full h-2.5 mb-1">
            <div class="bg-blue-600 h-2.5 rounded-full transition-all duration-500" :style="`width: ${item.progress_percentage}%`"></div>
        </div>
        <div class="flex justify-between text-xs text-gray-400">
            <span x-text="`Page ${item.current_page + 1} of ${item.total_pages}`"></span>
            <span x-text="`${Math.round(item.progress_percentage)}%`"></span>
        </div>
    </div>

    <div class="flex sm:flex-col gap-2 justify-center sm:border-l sm:border-gray-700 sm:pl-4">
        <a :href="window.url(`/reader/${item.comic_id}`)" class="btn-primary text-sm text-center py-2 px-4 flex-1 sm:flex-none">
            Continue
        </a>

        <template x-if="!item.completed">
            <button @click="markRead(item.comic_id)" class="text-xs text-gray-400 hover:text-green-400 border border-gray-600 hover:border-green-500 rounded px-3 py-2 transition-colors flex-1 sm:flex-none">
                Mark Read
            </button>
        </template>

        <button @click="markUnread(item.comic_id)" class="text-xs text-gray-400 hover:text-red-400 border border-gray-600 hover:border-red-500 rounded px-3 py-2 transition-colors flex-1 sm:flex-none">
            Remove
        </button>
    </div>
</div>